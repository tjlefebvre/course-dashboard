// 1. The Data
const courses = [
    {
        "title": "The Essentials of Sketching Architecture",
        "instructor": "Stephanie Bower",
        "platform": "Craftsy",
        "status": "Not Started",
        "link": "https://www.craftsy.com/class/the-essentials-of-sketching-architecture",
	"lessons": [
    {
{	
	"number": 1,
                "title": "Class Preview (1:28)",
                "link": "https://www.craftsy.com/class/the-essentials-of-sketching-architecture",
                "video": "https://manifest.prod.boltdns.net/manifest/v1/hls/v4/clear/6168786647001/9e7a3403-ea28-425f-9739-8c2d8ab228cf/10s/master.m3u8?fastly_token=NjkyZWVlYTBfMTA2NjMwM2E5YmFhNWUyNGMwZTYyZjg5NTg2YmEwZjkyYzA4OGI4NGRjYzExZGMwNDZiYzM1YzRjMDUzODFkYg%3D%3D"
            },
    },
    {
        "number": 2,
        "title": "How We See Buildings (21:37)",
        "link": "https://www.craftsy.com/class/the-essentials-of-sketching-architecture#description"
    },
    {
        "number": 3,
        "title": "Architectural Elements (25:37)",
        "link": "https://www.craftsy.com/class/the-essentials-of-sketching-architecture#description"
    },
    {
        "number": 4,
        "title": "Building Materials (28:21)",
        "link": "https://www.craftsy.com/class/the-essentials-of-sketching-architecture#description"
    },
    {
        "number": 5,
        "title": "Sloping Surfaces (19:28)",
        "link": "https://www.craftsy.com/class/the-essentials-of-sketching-architecture#description"
    },
    {
        "number": 6,
        "title": "Tips & Techniques (18:13)",
        "link": "https://www.craftsy.com/class/the-essentials-of-sketching-architecture#description"
    },
    {
        "number": 7,
        "title": "Sketching Buildings on Location (22:27)",
        "link": "https://www.craftsy.com/class/the-essentials-of-sketching-architecture#description"
    },
],
    },
    {
        "title": "Essential Techniques for Sketching the Energy of Places",
        "instructor": "James Richards",
        "platform": "Craftsy",
        "status": "Not Started",
        "link": "https://www.craftsy.com/class/essential-techniques-for-sketching-the-energy-of-places",
        "lessons": [
    {
        "number": 1,
        "title": "Class Preview (1:36)",
        "link": "https://www.craftsy.com/class/essential-techniques-for-sketching-the-energy-of-places"
    },
    {
        "number": 2,
        "title": "Finding the Perfect Place (13:11)",
        "link": "https://www.craftsy.com/class/essential-techniques-for-sketching-the-energy-of-places"
    },
    {
        "number": 3,
        "title": "Drawing People in the City (19:50)",
        "link": "https://www.craftsy.com/class/essential-techniques-for-sketching-the-energy-of-places"
    },
    {
        "number": 4,
        "title": "Buildings as Backdrop (20:52)",
        "link": "https://www.craftsy.com/class/essential-techniques-for-sketching-the-energy-of-places"
    },
    {
        "number": 5,
        "title": "The Entourage (20:52)",
        "link": "https://www.craftsy.com/class/essential-techniques-for-sketching-the-energy-of-places"
    },
    {
        "number": 6,
        "title": "Adding Color (22:36)",
        "link": "https://www.craftsy.com/class/essential-techniques-for-sketching-the-energy-of-places"
    },
    {
        "number": 7,
        "title": "Hitting the Streets: On Location (19:03)",
        "link": "https://www.craftsy.com/class/essential-techniques-for-sketching-the-energy-of-places"
    },
],
    },
    {
        "title": "Sketching the City in Pen, Ink & Watercolor",
        "instructor": "Shari Blaukopf",
        "platform": "Craftsy",
        "status": "Not Started",
        "link": "https://www.craftsy.com/class/sketching-the-city-in-pen-ink-watercolor",
        "lessons": [
    {
        "number": 1,
        "title": "Class Preview (1:35)",
        "link": "https://www.craftsy.com/class/sketching-the-city-in-pen-ink-watercolor"
    },
    {
        "number": 2,
        "title": "Thumbnails & Composition (19:46)",
        "link": "https://www.craftsy.com/class/sketching-the-city-in-pen-ink-watercolor"
    },
    {
        "number": 3,
        "title": "Drawing Facades (28:53)",
        "link": "https://www.craftsy.com/class/sketching-the-city-in-pen-ink-watercolor"
    },
    {
        "number": 4,
        "title": "Urban Texture (29:05)",
        "link": "https://www.craftsy.com/class/sketching-the-city-in-pen-ink-watercolor"
    },
    {
        "number": 5,
        "title": "Doors & Windows (23:18)",
        "link": "https://www.craftsy.com/class/sketching-the-city-in-pen-ink-watercolor"
    },
    {
        "number": 6,
        "title": "Details That Give Cities Life (25:10)",
        "link": "https://www.craftsy.com/class/sketching-the-city-in-pen-ink-watercolor"
    },
    {
        "number": 7,
        "title": "Light & Shadow (22:35)",
        "link": "https://www.craftsy.com/class/sketching-the-city-in-pen-ink-watercolor"
    },
    {
        "number": 8,
        "title": "Panoramic Cityscapes (26:30)",
        "link": "https://www.craftsy.com/class/sketching-the-city-in-pen-ink-watercolor"
    },
],
    },
    {
        "title": "Perspective for Sketchers",
        "instructor": "Stephanie Bower",
        "platform": "Craftsy",
        "status": "Not Started",
        "link": "https://www.craftsy.com/class/perspective-for-sketchers",
        "lessons": [
    {
        "number": 1,
        "title": "Class Preview (1:31)",
        "link": "https://www.craftsy.com/class/perspective-for-sketchers"
    },
    {
        "number": 2,
        "title": "Measuring Accurate Proportions (16:44)",
        "link": "https://www.craftsy.com/class/perspective-for-sketchers"
    },
    {
        "number": 3,
        "title": "Building a Sketch in Layers (20:30)",
        "link": "https://www.craftsy.com/class/perspective-for-sketchers"
    },
    {
        "number": 4,
        "title": "Concepts of Perspective Space (23:07)",
        "link": "https://www.craftsy.com/class/perspective-for-sketchers"
    },
    {
        "number": 5,
        "title": "Perspective Angles (22:34)",
        "link": "https://www.craftsy.com/class/perspective-for-sketchers"
    },
    {
        "number": 6,
        "title": "Using Watercolor (20:37)",
        "link": "https://www.craftsy.com/class/perspective-for-sketchers"
    },
    {
        "number": 7,
        "title": "Location Sketching: Interior (13:32)",
        "link": "https://www.craftsy.com/class/perspective-for-sketchers"
    },
    {
        "number": 8,
        "title": "Location Sketching: Streetscape (14:08)",
        "link": "https://www.craftsy.com/class/perspective-for-sketchers"
    },
],
    },
    {
        "title": "Travel Sketching in Mixed Media",
        "instructor": "Marc Taro Holmes",
        "platform": "Craftsy",
        "status": "Not Started",
        "link": "https://www.craftsy.com/class/travel-sketching-in-mixed-media",
        "lessons": [
    {
        "number": 1,
        "title": "Class Preview (1:25)",
        "link": "https://www.craftsy.com/class/travel-sketching-in-mixed-media"
    },
    {
        "number": 2,
        "title": "Single-Line Sketching (30:25)",
        "link": "https://www.craftsy.com/class/travel-sketching-in-mixed-media"
    },
    {
        "number": 3,
        "title": "Draw Like a Painter (29:36)",
        "link": "https://www.craftsy.com/class/travel-sketching-in-mixed-media"
    },
    {
        "number": 4,
        "title": "Tinting Drawings in Watercolor (27:21)",
        "link": "https://www.craftsy.com/class/travel-sketching-in-mixed-media"
    },
    {
        "number": 5,
        "title": "Sketch Collecting (20:51)",
        "link": "https://www.craftsy.com/class/travel-sketching-in-mixed-media"
    },
    {
        "number": 6,
        "title": "Painless Perspective (23:59)",
        "link": "https://www.craftsy.com/class/travel-sketching-in-mixed-media"
    },
    {
        "number": 7,
        "title": "Watercolor Sketching (21:06)",
        "link": "https://www.craftsy.com/class/travel-sketching-in-mixed-media"
    },
    {
        "number": 8,
        "title": "Working in Layers (16:26)",
        "link": "https://www.craftsy.com/class/travel-sketching-in-mixed-media"
    },
],
    },
    {
        "title": "Sketching Landscapes in Pen, Ink & Watercolor",
        "instructor": "Shari Blaukopf",
        "platform": "Craftsy",
        "status": "Not Started",
        "link": "https://www.craftsy.com/class/sketching-landscapes-in-pen-ink-watercolor",
        "lessons": [
    {
        "number": 1,
        "title": "Class Preview (1:42)",
        "link": "https://www.craftsy.com/class/sketching-landscapes-in-pen-ink-watercolor"
    },
    {
        "number": 2,
        "title": "Shari's Sketchbooks (22:23)",
        "link": "https://www.craftsy.com/class/sketching-landscapes-in-pen-ink-watercolor"
    },
    {
        "number": 3,
        "title": "Composition (13:33)",
        "link": "https://www.craftsy.com/class/sketching-landscapes-in-pen-ink-watercolor"
    },
    {
        "number": 4,
        "title": "Skies (36:46)",
        "link": "https://www.craftsy.com/class/sketching-landscapes-in-pen-ink-watercolor"
    },
    {
        "number": 5,
        "title": "Big Shapes (31:52)",
        "link": "https://www.craftsy.com/class/sketching-landscapes-in-pen-ink-watercolor"
    },
    {
        "number": 6,
        "title": "Texture (33:43)",
        "link": "https://www.craftsy.com/class/sketching-landscapes-in-pen-ink-watercolor"
    },
    {
        "number": 7,
        "title": "Adding Depth With Value (15:38)",
        "link": "https://www.craftsy.com/class/sketching-landscapes-in-pen-ink-watercolor"
    },
    {
        "number": 8,
        "title": "Expressing Unique Moments (21:39)",
        "link": "https://www.craftsy.com/class/sketching-landscapes-in-pen-ink-watercolor"
    },
],
    },
    {
        "title": "Sketching People in Motion",
        "instructor": "Marc Taro Holmes",
        "platform": "Craftsy",
        "status": "Not Started",
        "link": "https://www.craftsy.com/class/sketching-people-in-motion",
        "lessons": [
    {
        "number": 1,
        "title": "Class Preview (0:53)",
        "link": "https://www.craftsy.com/class/sketching-people-in-motion"
    },
    {
        "number": 2,
        "title": "The Pencil Gesture (16:42)",
        "link": "https://www.craftsy.com/class/sketching-people-in-motion"
    },
    {
        "number": 3,
        "title": "Adding Ink (31:00)",
        "link": "https://www.craftsy.com/class/sketching-people-in-motion"
    },
    {
        "number": 4,
        "title": "Brushwork & Hatching (20:27)",
        "link": "https://www.craftsy.com/class/sketching-people-in-motion"
    },
    {
        "number": 5,
        "title": "Adding Color (26:01)",
        "link": "https://www.craftsy.com/class/sketching-people-in-motion"
    },
    {
        "number": 6,
        "title": "Advanced Techniques: Water-Soluble Ink (19:07)",
        "link": "https://www.craftsy.com/class/sketching-people-in-motion"
    },
    {
        "number": 7,
        "title": "Advanced Techniques: Direct to Watercolor (20:28)",
        "link": "https://www.craftsy.com/class/sketching-people-in-motion"
    },
    {
        "number": 8,
        "title": "Capturing Multiple People (15:12)",
        "link": "https://www.craftsy.com/class/sketching-people-in-motion"
    },
],
    } 
];

// 2. The Engine
const container = document.getElementById('course-container');
const searchInput = document.getElementById('search-input');

function displayCourses(courseList) {
    container.innerHTML = ''; 
    
    courseList.forEach((course, index) => {
        // Create a unique ID for each dropdown
        const detailsId = `details-${index}`;
        const instructor = course.instructor ? course.instructor : "";
        
        // Generate HTML for lessons (if they exist)
        let lessonsHtml = '<p style="padding: 10px; color: #666;">No lesson details added yet.</p>';
        
        if (course.lessons && course.lessons.length > 0) {
            lessonsHtml = '<ul style="list-style: none; padding: 0; margin: 0;">';
		course.lessons.forEach(lesson => {
                let content = '';
                
                // If we have a direct video stream, embed a player
                if (lesson.video) {
                    content = `
                        <div style="margin-top: 5px;">
                            <video controls style="width: 100%; border-radius: 4px; background: #000;">
                                <source src="${lesson.video}" type="application/x-mpegURL">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                    `;
                }
                
                lessonsHtml += `
                    <li style="padding: 12px 10px; border-bottom: 1px solid #333; font-size: 0.9em;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: ${lesson.video ? '10px' : '0'};">
                            <a href="${lesson.link}" target="_blank" style="color: #aaa; text-decoration: none;">
                                <span>${lesson.number}. ${lesson.title}</span>
                            </a>
                        </div>
                        ${content}
                    </li>
                `;
            });
            lessonsHtml += '</ul>';
        }

        const card = `
            <div class="course-card" style="display: block;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div class="course-info">
                        <h3>${course.title}</h3>
                        <p style="color: #bbb; font-size: 0.9em; margin-bottom: 5px;">${instructor}</p>
                        <span class="platform-tag">${course.platform}</span>
                    </div>
                    <div>
                        <button onclick="document.getElementById('${detailsId}').style.display = document.getElementById('${detailsId}').style.display === 'none' ? 'block' : 'none'" style="margin-right: 5px;">
                            Chapters
                        </button>
                        <a href="${course.link}" target="_blank">
                            <button>Open</button>
                        </a>
                    </div>
                </div>
                
                <div id="${detailsId}" style="display: none; margin-top: 15px; background: #1f1f1f; border-radius: 4px; border: 1px solid #333;">
                    ${lessonsHtml}
                </div>
            </div>
        `;
        container.innerHTML += card;
    });
}

// 3. The Listener (Search Logic)
searchInput.addEventListener('keyup', (e) => {
    const searchString = e.target.value.toLowerCase();
    
    const filteredCourses = courses.filter(course => {
        return course.title.toLowerCase().includes(searchString) || 
               course.platform.toLowerCase().includes(searchString);
    });
    
    displayCourses(filteredCourses);
});

// Start the engine
displayCourses(courses);
